breaks = c(10, 100, 1000, 2500, 5000, 8000, 12500)) + #Set limits and breaks of volume dots
scale_T_continuous(limits=c(0,1.0),
breaks=seq(0,1,by=0.2),
labels=label) +
scale_L_continuous(limits=c(0.0,1),
breaks=seq(0,1,by=0.2),
labels=label) +
scale_R_continuous(limits=c(0.0,1),
breaks=seq(0,1,by=0.2),
labels=label)+
theme_dark()+
guides(size= guide_legend(reverse=TRUE, order = 0))+
theme(tern.axis.title.R = element_text(hjust=0.6))
name <- paste("p",x, sep = "_")
tmp <- ggplotGrob(p)
l[[name]] <- tmp
}
# fig <- ggarrange(plots = l, ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")
# fig <- do.call(ggarrange, c(l, list(ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")))
fig <- wrap_plots(l, ncol = 2, nrow = 4) + plot_layout(widths = c(1,15,5), guides = "collect") & theme(legend.position = "right")
ggsave("../output/heat_fig.png", fig)
print(fig)
group <- seq(1550,1850,by=50) #Select years for figure
l <- list()
label = seq(0,1,by=.2)
for (x in group) {
df <- py$dfyears(x)
p <- ggtern(df, aes(x = df$Politics, y = df$Religion, z = df$Science)) +
geom_tri_tern(bins=5,aes(fill=..stat.., value=df$Percentile),fun=mean) +
stat_tri_tern(bins=5,fun=mean, geom= 'point',
aes(size=..count..,value=df$Percentile),
color="white",centroid=TRUE) +
labs(x = "Politics", y = "Religion", z = "Science", title=x, fill="Percentile", size="Volumes") +
theme_dark()+
theme(legend.position = "none")
theme(tern.axis.title.R = element_text(hjust=0.6))
name <- paste("p",x, sep = "_")
tmp <- ggplotGrob(p)
l[[name]] <- tmp
}
# fig <- ggarrange(plots = l, ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")
# fig <- do.call(ggarrange, c(l, list(ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")))
fig <- wrap_plots(l, ncol = 2, nrow = 4) + plot_layout(widths = c(1,15,5), guides = "collect") & theme(legend.position = "right")
ggsave("../output/heat_fig.png", fig)
print(fig)
grid.arrange(l$p_1550, l$p_1600, l$p_1650, l$p_1700, l$p_1750, l$p_1800, l$p_1850,
layout_matrix = rbind(c(1,2), c(3,4), c(5,6), c(7,7)))
# do.call("grid.arrange", c(l, ncol = 2))
group <- seq(1550,1850,by=50) #Select years for figure
l <- list()
label = seq(0,1,by=.2)
for (x in group) {
df <- py$dfyears(x)
p <- ggtern(df, aes(x = df$Politics, y = df$Religion, z = df$Science)) +
geom_tri_tern(bins=5,aes(fill=..stat.., value=df$Percentile),fun=mean) +
stat_tri_tern(bins=5,fun=mean, geom= 'point',
aes(size=..count..,value=df$Percentile),
color="white",centroid=TRUE) +
labs(x = "Politics", y = "Religion", z = "Science", title=x, fill="Percentile", size="Volumes") +
theme_dark()+
theme(legend.position = "none")
theme(tern.axis.title.R = element_text(hjust=0.6))
name <- paste("p",x, sep = "_")
tmp <- ggplotGrob(p)
l[[name]] <- tmp
}
# fig <- ggarrange(plots = l, ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")
# fig <- do.call(ggarrange, c(l, list(ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")))
fig <- wrap_plots(l, ncol = 2, nrow = 4) + plot_layout(widths = c(1,15,5), guides = "collect") & theme(legend.position = "right")
ggsave("../output/heat_fig.png", fig)
print(fig)
grid.arrange(l$p_1550, l$p_1600, l$p_1650, l$p_1700, l$p_1750, l$p_1800, l$p_1850,
layout_matrix = rbind(c(1,2), c(3,4), c(5,6), c(7,7)), heights = 1:2, widths = 1:2)
group <- seq(1550,1850,by=50) #Select years for figure
l <- list()
label = seq(0,1,by=.2)
for (x in group) {
df <- py$dfyears(x)
p <- ggtern(df, aes(x = df$Politics, y = df$Religion, z = df$Science)) +
geom_tri_tern(bins=5,aes(fill=..stat.., value=df$Percentile),fun=mean) +
stat_tri_tern(bins=5,fun=mean, geom= 'point',
aes(size=..count..,value=df$Percentile),
color="white",centroid=TRUE) +
labs(x = "Politics", y = "Religion", z = "Science", title=x, fill="Percentile", size="Volumes") +
theme_dark()+
theme(legend.position = "none")
theme(tern.axis.title.R = element_text(hjust=0.6))
name <- paste("p",x, sep = "_")
tmp <- ggplotGrob(p)
l[[name]] <- tmp
}
# fig <- ggarrange(plots = l, ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")
# fig <- do.call(ggarrange, c(l, list(ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")))
fig <- wrap_plots(l, ncol = 2, nrow = 4) + plot_layout(widths = c(1,15,5), guides = "collect") & theme(legend.position = "right")
ggsave("../output/heat_fig.png", fig)
print(fig)
grid.arrange(l$p_1550, l$p_1600, l$p_1650, l$p_1700, l$p_1750, l$p_1800, l$p_1850,
layout_matrix = rbind(c(1,2), c(3,4), c(5,6), c(7,7)), heights = 3, widths = 3)
group <- seq(1550,1850,by=50) #Select years for figure
l <- list()
label = seq(0,1,by=.2)
for (x in group) {
df <- py$dfyears(x)
p <- ggtern(df, aes(x = df$Politics, y = df$Religion, z = df$Science)) +
geom_tri_tern(bins=5,aes(fill=..stat.., value=df$Percentile),fun=mean) +
stat_tri_tern(bins=5,fun=mean, geom= 'point',
aes(size=..count..,value=df$Percentile),
color="white",centroid=TRUE) +
labs(x = "Politics", y = "Religion", z = "Science", title=x, fill="Percentile", size="Volumes") +
theme_dark()+
theme(legend.position = "none")
theme(tern.axis.title.R = element_text(hjust=0.6))
name <- paste("p",x, sep = "_")
tmp <- ggplotGrob(p)
l[[name]] <- tmp
}
# fig <- ggarrange(plots = l, ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")
# fig <- do.call(ggarrange, c(l, list(ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")))
fig <- wrap_plots(l, ncol = 2, nrow = 4) + plot_layout(widths = c(1,15,5), guides = "collect") & theme(legend.position = "right")
ggsave("../output/heat_fig.png", fig)
print(fig)
grid.arrange(l$p_1550, l$p_1600, l$p_1650, l$p_1700, l$p_1750, l$p_1800, l$p_1850,
layout_matrix = rbind(c(1,2), c(3,4), c(5,6), c(7,7)), heights = 3:3, widths = 3:3)
group <- seq(1550,1850,by=50) #Select years for figure
l <- list()
label = seq(0,1,by=.2)
for (x in group) {
df <- py$dfyears(x)
p <- ggtern(df, aes(x = df$Politics, y = df$Religion, z = df$Science)) +
geom_tri_tern(bins=5,aes(fill=..stat.., value=df$Percentile),fun=mean) +
stat_tri_tern(bins=5,fun=mean, geom= 'point',
aes(size=..count..,value=df$Percentile),
color="white",centroid=TRUE) +
labs(x = "Politics", y = "Religion", z = "Science", title=x, fill="Percentile", size="Volumes") +
theme_dark()+
theme(legend.position = "none")
theme(tern.axis.title.R = element_text(hjust=0.6))
name <- paste("p",x, sep = "_")
tmp <- ggplotGrob(p)
l[[name]] <- tmp
}
# fig <- ggarrange(plots = l, ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")
# fig <- do.call(ggarrange, c(l, list(ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")))
fig <- wrap_plots(l, ncol = 2, nrow = 4) + plot_layout(widths = c(1,15,5), guides = "collect") & theme(legend.position = "right")
ggsave("../output/heat_fig.png", fig)
print(fig)
grid.arrange(l$p_1550, l$p_1600, l$p_1650, l$p_1700, l$p_1750, l$p_1800, l$p_1850,
layout_matrix = rbind(c(1,2), c(3,4), c(5,6), c(7,7)), heights = c(3,3,3,3,3,3,3), widths = c(3,3,3,3,3,3,3))
# do.call("grid.arrange", c(l, ncol = 2))
group <- seq(1550,1850,by=50) #Select years for figure
l <- list()
label = seq(0,1,by=.2)
for (x in group) {
df <- py$dfyears(x)
p <- ggtern(df, aes(x = df$Politics, y = df$Religion, z = df$Science)) +
geom_tri_tern(bins=5,aes(fill=..stat.., value=df$Percentile),fun=mean) +
stat_tri_tern(bins=5,fun=mean, geom= 'point',
aes(size=..count..,value=df$Percentile),
color="white",centroid=TRUE) +
labs(x = "Politics", y = "Religion", z = "Science", title=x, fill="Percentile", size="Volumes") +
theme_dark()+
theme(legend.position = "none")
theme(tern.axis.title.R = element_text(hjust=0.6))
name <- paste("p",x, sep = "_")
tmp <- ggplotGrob(p)
l[[name]] <- tmp
}
# fig <- ggarrange(plots = l, ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")
# fig <- do.call(ggarrange, c(l, list(ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")))
fig <- wrap_plots(l, ncol = 2, nrow = 4) + plot_layout(widths = c(1,15,5), guides = "collect") & theme(legend.position = "right")
ggsave("../output/heat_fig.png", fig)
print(fig)
grid.arrange(l$p_1550, l$p_1600, l$p_1650, l$p_1700, l$p_1750, l$p_1800, l$p_1850,
layout_matrix = rbind(c(1,2), c(3,4), c(5,6), c(7,7)), heights = c(5,5,5,5,5,5,5), widths = c(5,5,5,5,5,5,5))
# do.call("grid.arrange", c(l, ncol = 2))
group <- seq(1550,1850,by=50) #Select years for figure
l <- list()
label = seq(0,1,by=.2)
for (x in group) {
df <- py$dfyears(x)
p <- ggtern(df, aes(x = df$Politics, y = df$Religion, z = df$Science)) +
geom_tri_tern(bins=5,aes(fill=..stat.., value=df$Percentile),fun=mean) +
stat_tri_tern(bins=5,fun=mean, geom= 'point',
aes(size=..count..,value=df$Percentile),
color="white",centroid=TRUE) +
labs(x = "Politics", y = "Religion", z = "Science", title=x, fill="Percentile", size="Volumes") +
theme_dark()+
theme(legend.position = "none")
theme(tern.axis.title.R = element_text(hjust=0.6))
name <- paste("p",x, sep = "_")
tmp <- ggplotGrob(p)
l[[name]] <- tmp
}
# fig <- ggarrange(plots = l, ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")
# fig <- do.call(ggarrange, c(l, list(ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")))
fig <- wrap_plots(l, ncol = 2, nrow = 4) + plot_layout(widths = c(1,15,5), guides = "collect") & theme(legend.position = "right")
ggsave("../output/heat_fig.png", fig)
print(fig)
grid.arrange(l$p_1550, l$p_1600, l$p_1650, l$p_1700, l$p_1750, l$p_1800, l$p_1850,
layout_matrix = rbind(c(1,2), c(3,4), c(5,6), c(7,7)), heights = c(1,1,1,1,1,1,1), widths = c(1,1,1,1,1,1,1))
# do.call("grid.arrange", c(l, ncol = 2))
group <- seq(1550,1850,by=50) #Select years for figure
l <- list()
label = seq(0,1,by=.2)
for (x in group) {
df <- py$dfyears(x)
p <- ggtern(df, aes(x = df$Politics, y = df$Religion, z = df$Science)) +
geom_tri_tern(bins=5,aes(fill=..stat.., value=df$Percentile),fun=mean) +
stat_tri_tern(bins=5,fun=mean, geom= 'point',
aes(size=..count..,value=df$Percentile),
color="white",centroid=TRUE) +
labs(x = "Politics", y = "Religion", z = "Science", title=x, fill="Percentile", size="Volumes") +
theme_dark()+
theme(legend.position = "none")
theme(tern.axis.title.R = element_text(hjust=0.6))
name <- paste("p",x, sep = "_")
tmp <- ggplotGrob(p)
l[[name]] <- tmp
}
# fig <- ggarrange(plots = l, ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")
# fig <- do.call(ggarrange, c(l, list(ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")))
#
# fig <- wrap_plots(l, ncol = 2, nrow = 4) + plot_layout(widths = c(1,15,5), guides = "collect") & theme(legend.position = "right")
#
#
# ggsave("../output/heat_fig.png", fig)
# print(fig)
cowplot::plot_grid(plotlist=l, nrow = 4)
# grid.arrange(l$p_1550, l$p_1600, l$p_1650, l$p_1700, l$p_1750, l$p_1800, l$p_1850,
#              layout_matrix = rbind(c(1,2), c(3,4), c(5,6), c(7,7)), heights = c(1,1,1,1,1,1,1), widths = c(1,1,1,1,1,1,1))
# do.call("grid.arrange", c(l, ncol = 2))
?wrap_plots
group <- seq(1550,1850,by=50) #Select years for figure
l <- list()
label = seq(0,1,by=.2)
for (x in group) {
df <- py$dfyears(x)
p <- ggtern(df, aes(x = df$Politics, y = df$Religion, z = df$Science)) +
geom_tri_tern(bins=5,aes(fill=..stat.., value=df$Percentile),fun=mean) +
stat_tri_tern(bins=5,fun=mean, geom= 'point',
aes(size=..count..,value=df$Percentile),
color="white",centroid=TRUE) +
labs(x = "Politics", y = "Religion", z = "Science", title=x, fill="Percentile", size="Volumes") +
theme_dark()+
theme(legend.position = "none")
theme(tern.axis.title.R = element_text(hjust=0.6))
name <- paste("p",x, sep = "_")
tmp <- ggplotGrob(p)
l[[name]] <- tmp
}
# fig <- ggarrange(plots = l, ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")
# fig <- do.call(ggarrange, c(l, list(ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")))
#
fig <- wrap_plots(l, ncol = 2, nrow = 4) + plot_layout(widths = c(1,15,5), guides = "collect") & theme(legend.position = "right")
ggsave("../output/heat_fig.png", fig)
print(fig)
cowplot::plot_grid(plotlist=l, nrow = 4)
# grid.arrange(l$p_1550, l$p_1600, l$p_1650, l$p_1700, l$p_1750, l$p_1800, l$p_1850,
#              layout_matrix = rbind(c(1,2), c(3,4), c(5,6), c(7,7)), heights = c(1,1,1,1,1,1,1), widths = c(1,1,1,1,1,1,1))
# do.call("grid.arrange", c(l, ncol = 2))
group <- seq(1550,1850,by=50) #Select years for figure
l <- list()
label = seq(0,1,by=.2)
for (x in group) {
df <- py$dfyears(x)
p <- ggtern(df, aes(x = df$Politics, y = df$Religion, z = df$Science)) +
geom_tri_tern(bins=5,aes(fill=..stat.., value=df$Percentile),fun=mean) +
stat_tri_tern(bins=5,fun=mean, geom= 'point',
aes(size=..count..,value=df$Percentile),
color="white",centroid=TRUE) +
labs(x = "Politics", y = "Religion", z = "Science", title=x, fill="Percentile", size="Volumes") +
theme_dark()+
theme(legend.position = "none")
theme(tern.axis.title.R = element_text(hjust=0.6))
name <- paste("p",x, sep = "_")
tmp <- ggplotGrob(p)
l[[name]] <- tmp
}
# fig <- ggarrange(plots = l, ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")
# fig <- do.call(ggarrange, c(l, list(ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")))
#
fig <- wrap_plots(l, ncol = 2, nrow = 4) + plot_layout(widths = c(15,15,15), guides = "collect") & theme(legend.position = "right")
ggsave("../output/heat_fig.png", fig)
print(fig)
# cowplot::plot_grid(plotlist=l, nrow = 4)
# grid.arrange(l$p_1550, l$p_1600, l$p_1650, l$p_1700, l$p_1750, l$p_1800, l$p_1850,
#              layout_matrix = rbind(c(1,2), c(3,4), c(5,6), c(7,7)), heights = c(1,1,1,1,1,1,1), widths = c(1,1,1,1,1,1,1))
# do.call("grid.arrange", c(l, ncol = 2))
group <- seq(1550,1850,by=50) #Select years for figure
l <- list()
label = seq(0,1,by=.2)
for (x in group) {
df <- py$dfyears(x)
p <- ggtern(df, aes(x = df$Politics, y = df$Religion, z = df$Science)) +
geom_tri_tern(bins=5,aes(fill=..stat.., value=df$Percentile),fun=mean) +
stat_tri_tern(bins=5,fun=mean, geom= 'point',
aes(size=..count..,value=df$Percentile),
color="white",centroid=TRUE) +
labs(x = "Politics", y = "Religion", z = "Science", title=x, fill="Percentile", size="Volumes") +
theme_dark()+
theme(legend.position = "none")
theme(tern.axis.title.R = element_text(hjust=0.6))
name <- paste("p",x, sep = "_")
tmp <- ggplotGrob(p)
l[[name]] <- tmp
}
# fig <- ggarrange(plots = l, ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")
# fig <- do.call(ggarrange, c(l, list(ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")))
#
fig <- wrap_plots(l, ncol = 2, nrow = 4) + plot_layout(widths = c(15,15,30), guides = "collect") & theme(legend.position = "right")
ggsave("../output/heat_fig.png", fig)
print(fig)
# cowplot::plot_grid(plotlist=l, nrow = 4)
# grid.arrange(l$p_1550, l$p_1600, l$p_1650, l$p_1700, l$p_1750, l$p_1800, l$p_1850,
#              layout_matrix = rbind(c(1,2), c(3,4), c(5,6), c(7,7)), heights = c(1,1,1,1,1,1,1), widths = c(1,1,1,1,1,1,1))
# do.call("grid.arrange", c(l, ncol = 2))
group <- seq(1550,1850,by=50) #Select years for figure
l <- list()
label = seq(0,1,by=.2)
for (x in group) {
df <- py$dfyears(x)
p <- ggtern(df, aes(x = df$Politics, y = df$Religion, z = df$Science)) +
geom_tri_tern(bins=5,aes(fill=..stat.., value=df$Percentile),fun=mean) +
stat_tri_tern(bins=5,fun=mean, geom= 'point',
aes(size=..count..,value=df$Percentile),
color="white",centroid=TRUE) +
labs(x = "Politics", y = "Religion", z = "Science", title=x, fill="Percentile", size="Volumes") +
theme_dark()+
theme(legend.position = "none")
theme(tern.axis.title.R = element_text(hjust=0.6))
name <- paste("p",x, sep = "_")
tmp <- ggplotGrob(p)
l[[name]] <- tmp
}
# fig <- ggarrange(plots = l, ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")
# fig <- do.call(ggarrange, c(l, list(ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")))
#
fig <- wrap_plots(l, ncol = 2, nrow = 4) + plot_layout(widths = c(15,15), guides = "collect") & theme(legend.position = "right")
ggsave("../output/heat_fig.png", fig)
print(fig)
# cowplot::plot_grid(plotlist=l, nrow = 4)
# grid.arrange(l$p_1550, l$p_1600, l$p_1650, l$p_1700, l$p_1750, l$p_1800, l$p_1850,
#              layout_matrix = rbind(c(1,2), c(3,4), c(5,6), c(7,7)), heights = c(1,1,1,1,1,1,1), widths = c(1,1,1,1,1,1,1))
# do.call("grid.arrange", c(l, ncol = 2))
group <- seq(1550,1850,by=50) #Select years for figure
l <- list()
label = seq(0,1,by=.2)
for (x in group) {
df <- py$dfyears(x)
p <- ggtern(df, aes(x = df$Politics, y = df$Religion, z = df$Science)) +
geom_tri_tern(bins=5,aes(fill=..stat.., value=df$Percentile),fun=mean) +
stat_tri_tern(bins=5,fun=mean, geom= 'point',
aes(size=..count..,value=df$Percentile),
color="white",centroid=TRUE) +
labs(x = "Politics", y = "Religion", z = "Science", title=x, fill="Percentile", size="Volumes") +
theme_dark()+
theme(legend.position = "none")
theme(tern.axis.title.R = element_text(hjust=0.6))
name <- paste("p",x, sep = "_")
tmp <- ggplotGrob(p)
l[[name]] <- tmp
}
# fig <- ggarrange(plots = l, ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")
# fig <- do.call(ggarrange, c(l, list(ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")))
#
fig <- wrap_plots(l, ncol = 2, nrow = 4) + plot_layout(widths = c(15,30), guides = "collect") & theme(legend.position = "right")
ggsave("../output/heat_fig.png", fig)
print(fig)
# cowplot::plot_grid(plotlist=l, nrow = 4)
# grid.arrange(l$p_1550, l$p_1600, l$p_1650, l$p_1700, l$p_1750, l$p_1800, l$p_1850,
#              layout_matrix = rbind(c(1,2), c(3,4), c(5,6), c(7,7)), heights = c(1,1,1,1,1,1,1), widths = c(1,1,1,1,1,1,1))
# do.call("grid.arrange", c(l, ncol = 2))
group <- seq(1550,1850,by=50) #Select years for figure
l <- list()
label = seq(0,1,by=.2)
for (x in group) {
df <- py$dfyears(x)
p <- ggtern(df, aes(x = df$Politics, y = df$Religion, z = df$Science)) +
geom_tri_tern(bins=5,aes(fill=..stat.., value=df$Percentile),fun=mean) +
stat_tri_tern(bins=5,fun=mean, geom= 'point',
aes(size=..count..,value=df$Percentile),
color="white",centroid=TRUE) +
labs(x = "Politics", y = "Religion", z = "Science", title=x, fill="Percentile", size="Volumes") +
theme_dark()+
theme(legend.position = "none")
theme(tern.axis.title.R = element_text(hjust=0.6))
name <- paste("p",x, sep = "_")
tmp <- ggplotGrob(p)
l[[name]] <- tmp
}
# fig <- ggarrange(plots = l, ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")
# fig <- do.call(ggarrange, c(l, list(ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")))
#
fig <- wrap_plots(l, ncol = 2, nrow = 4) + plot_layout(widths = c(30,30), guides = "collect") & theme(legend.position = "right")
ggsave("../output/heat_fig.png", fig)
print(fig)
# cowplot::plot_grid(plotlist=l, nrow = 4)
# grid.arrange(l$p_1550, l$p_1600, l$p_1650, l$p_1700, l$p_1750, l$p_1800, l$p_1850,
#              layout_matrix = rbind(c(1,2), c(3,4), c(5,6), c(7,7)), heights = c(1,1,1,1,1,1,1), widths = c(1,1,1,1,1,1,1))
# do.call("grid.arrange", c(l, ncol = 2))
group <- seq(1550,1850,by=50) #Select years for figure
l <- list()
label = seq(0,1,by=.2)
for (x in group) {
df <- py$dfyears(x)
p <- ggtern(df, aes(x = df$Politics, y = df$Religion, z = df$Science)) +
geom_tri_tern(bins=5,aes(fill=..stat.., value=df$Percentile),fun=mean) +
stat_tri_tern(bins=5,fun=mean, geom= 'point',
aes(size=..count..,value=df$Percentile),
color="white",centroid=TRUE) +
labs(x = "Politics", y = "Religion", z = "Science", title=x, fill="Percentile", size="Volumes") +
theme_dark()+
theme(legend.position = "none")
theme(tern.axis.title.R = element_text(hjust=0.6))
name <- paste("p",x, sep = "_")
tmp <- ggplotGrob(p)
l[[name]] <- tmp
}
# fig <- ggarrange(plots = l, ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")
# fig <- do.call(ggarrange, c(l, list(ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")))
#
fig <- wrap_plots(l, ncol = 2, nrow = 4) + plot_layout(widths = c(30,30), guides = "collect") & theme(legend.position = "right")
ggsave("../output/heat_fig.png", fig)
print(fig)
# cowplot::plot_grid(plotlist=l, nrow = 4)
# grid.arrange(l$p_1550, l$p_1600, l$p_1650, l$p_1700, l$p_1750, l$p_1800, l$p_1850,
#              layout_matrix = rbind(c(1,2), c(3,4), c(5,6), c(7,7)), heights = c(1,1,1,1,1,1,1), widths = c(1,1,1,1,1,1,1))
# do.call("grid.arrange", c(l, ncol = 2))
group <- seq(1550,1850,by=50) #Select years for figure
l <- list()
label = seq(0,1,by=.2)
for (x in group) {
df <- py$dfyears(x)
p <- ggtern(df, aes(x = df$Politics, y = df$Religion, z = df$Science)) +
geom_tri_tern(bins=5,aes(fill=..stat.., value=df$Percentile),fun=mean) +
stat_tri_tern(bins=5,fun=mean, geom= 'point',
aes(size=..count..,value=df$Percentile),
color="white",centroid=TRUE) +
labs(x = "Politics", y = "Religion", z = "Science", title=x, fill="Percentile", size="Volumes") +
theme_dark()+
theme(legend.position = "none")
theme(tern.axis.title.R = element_text(hjust=0.6))
name <- paste("p",x, sep = "_")
tmp <- ggplotGrob(p)
l[[name]] <- tmp
}
# fig <- ggarrange(plots = l, ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")
# fig <- do.call(ggarrange, c(l, list(ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")))
#
fig <- wrap_plots(l, ncol = 2, nrow = 4) + plot_layout(widths = c(50,50), guides = "collect") & theme(legend.position = "right")
print(fig)
ggsave("../output/heat_fig.png", fig)
# cowplot::plot_grid(plotlist=l, nrow = 4)
# grid.arrange(l$p_1550, l$p_1600, l$p_1650, l$p_1700, l$p_1750, l$p_1800, l$p_1850,
#              layout_matrix = rbind(c(1,2), c(3,4), c(5,6), c(7,7)), heights = c(1,1,1,1,1,1,1), widths = c(1,1,1,1,1,1,1))
# do.call("grid.arrange", c(l, ncol = 2))
group <- seq(1550,1850,by=50) #Select years for figure
l <- list()
label = seq(0,1,by=.2)
for (x in group) {
df <- py$dfyears(x)
p <- ggtern(df, aes(x = df$Politics, y = df$Religion, z = df$Science)) +
geom_tri_tern(bins=5,aes(fill=..stat.., value=df$Percentile),fun=mean) +
stat_tri_tern(bins=5,fun=mean, geom= 'point',
aes(size=..count..,value=df$Percentile),
color="white",centroid=TRUE) +
labs(x = "Politics", y = "Religion", z = "Science", title=x, fill="Percentile", size="Volumes") +
theme_dark()+
theme(legend.position = "none")
theme(tern.axis.title.R = element_text(hjust=0.6))
name <- paste("p",x, sep = "_")
tmp <- ggplotGrob(p)
l[[name]] <- tmp
}
# fig <- ggarrange(plots = l, ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")
# fig <- do.call(ggarrange, c(l, list(ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")))
#
fig <- wrap_plots(l, ncol = 2, nrow = 4) + plot_layout(widths = c(100,50), guides = "collect") & theme(legend.position = "right")
print(fig)
ggsave("../output/heat_fig.png", fig)
# cowplot::plot_grid(plotlist=l, nrow = 4)
# grid.arrange(l$p_1550, l$p_1600, l$p_1650, l$p_1700, l$p_1750, l$p_1800, l$p_1850,
#              layout_matrix = rbind(c(1,2), c(3,4), c(5,6), c(7,7)), heights = c(1,1,1,1,1,1,1), widths = c(1,1,1,1,1,1,1))
# do.call("grid.arrange", c(l, ncol = 2))
group <- seq(1550,1850,by=50) #Select years for figure
l <- list()
label = seq(0,1,by=.2)
for (x in group) {
df <- py$dfyears(x)
p <- ggtern(df, aes(x = df$Politics, y = df$Religion, z = df$Science)) +
geom_tri_tern(bins=5,aes(fill=..stat.., value=df$Percentile),fun=mean) +
stat_tri_tern(bins=5,fun=mean, geom= 'point',
aes(size=..count..,value=df$Percentile),
color="white",centroid=TRUE) +
labs(x = "Politics", y = "Religion", z = "Science", title=x, fill="Percentile", size="Volumes") +
theme_dark()+
theme(legend.position = "none")
theme(tern.axis.title.R = element_text(hjust=0.6))
name <- paste("p",x, sep = "_")
tmp <- ggplotGrob(p)
l[[name]] <- tmp
}
# fig <- ggarrange(plots = l, ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")
# fig <- do.call(ggarrange, c(l, list(ncol = 2, nrow = 4, common.legend = TRUE, legend = "right")))
#
fig <- wrap_plots(l, ncol = 2, nrow = 4) + plot_layout(widths = c(50,50), heights = c(50,50), guides = "collect") & theme(legend.position = "right")
print(fig)
ggsave("../output/heat_fig.png", fig)
# cowplot::plot_grid(plotlist=l, nrow = 4)
# grid.arrange(l$p_1550, l$p_1600, l$p_1650, l$p_1700, l$p_1750, l$p_1800, l$p_1850,
#              layout_matrix = rbind(c(1,2), c(3,4), c(5,6), c(7,7)), heights = c(1,1,1,1,1,1,1), widths = c(1,1,1,1,1,1,1))
# do.call("grid.arrange", c(l, ncol = 2))
